<div class="game-container">

    <div *ngIf="viewMode === 'category'" class="fade-in">
        <div class="welcome-header">
            <h1>üöÄ Portal Code Kids</h1>
            <p>Escolha sua miss√£o para come√ßar!</p>
        </div>

        <div class="category-grid">
            <div *ngFor="let cat of categories" (click)="selectCategory(cat.id)" class="card-adventure"
                [class.is-completed]="cat.completed" [style.border-bottom-color]="cat.color">

                <div class="status-icon">
                    {{ cat.completed ? '‚úÖ' : '‚è≥' }}
                </div>

                <div class="icon-circle" [style.background-color]="cat.color + '22'">
                    {{ cat.icon }}
                </div>

                <h3>{{ cat.name }}</h3>
                <p>{{ cat.description }}</p>

                <button class="btn-action" [style.background-color]="cat.color">
                    {{ cat.completed ? 'Treinar de novo' : 'Jogar' }}
                </button>
            </div>
        </div>
    </div>

    <div *ngIf="viewMode === 'game'" class="fade-in">
        <div *ngIf="!quizFinalizado; else finalizado">
            <div class="game-header">
                <button class="btn-back" (click)="backToCategories()">‚¨Ö Sair</button>
                <div class="progress-info">
                    <span>Miss√£o: {{ selectedCategory }}</span>
                    <div class="bar-bg">
                        <div class="bar-fill" [style.width.%]="((currentIndex + 1) / questions.length) * 100"></div>
                    </div>
                </div>
            </div>

            <app-question-card [question]="questions[currentIndex]" (answerSelected)="handleAnswer($event)">
            </app-question-card>
        </div>
    </div>

    <ng-template #finalizado>
        <div class="result-screen fade-in">
            <div class="big-icon">üèÜ</div>
            <h2>Miss√£o Cumprida!</h2>
            <p>Voc√™ √© fera em <strong>{{ selectedCategory }}</strong>!</p>
            <div class="score-box">Acertos: {{ score }} / {{ questions.length }}</div>
            <button class="btn-finish" (click)="backToCategories()">Voltar ao Mapa</button>
        </div>
    </ng-template>

</div>